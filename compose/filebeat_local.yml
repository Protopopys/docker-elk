version: "3.6"

services:

  filebeat:
    volumes:
      - ${FILEBEAT_DATA:-/elk/filebeat}:/usr/share/filebeat/data:rw
      - $PWD/beats/filebeat/config/filebeat.yml:/usr/share/filebeat/filebeat.yml:ro
    environment:
      ELASTICSEARCH_HOST: ${ELASTICSEARCH_HOST:-http://elasticsearch:9200}
      KIBANA_HOST: ${KIBANA_HOST:-http://kibana:5601}
    restart: on-failure
networks:
  filebeat:
    driver: bridge